import{a as m}from"./axios-c0bebe37.js";import{_ as w,r as n,o as k,c as g,f as t,g as o,a,t as u,F as x,e as N,h as r,k as v}from"./index-d39f5865.js";const K={data(){return{forder_api:"http://127.0.0.1:8000/dmsAPi/folder/",forderList:[],role_api:"http://127.0.0.1:8000/dmsAPi/role/",roleList:[],role_id:"",role_name:"",defaultProps:{children:"children",label:"folder_name"},checked_keys:[],treeList:[],right:[{id:1,name:"download",selected:0},{id:2,name:"download + upload",selected:0},{id:3,name:"download + upload + delete",selected:0}]}},created(){this.getForderList(),this.getRoleList()},methods:{getForderList(){m({url:this.forder_api,method:"get",headers:{Authorization:"Token "+localStorage.token}}).then(e=>{let d=e.data.results.filter(s=>s.p_id==0);d.forEach(s=>{s.children=e.data.results.filter(_=>_.p_id==s.id)}),d.forEach(s=>{s.children.forEach(_=>{_.right=this.right})}),this.forderList=d}).catch(e=>{})},getRoleList(){m({url:this.role_api,method:"get",headers:{Authorization:"Token "+localStorage.token}}).then(e=>{this.roleList=e.data.results}).catch(e=>{})},getCheckedNodes(){let e=[];this.$refs.tree.getCheckedNodes().forEach(s=>{e.push(s.p_id),e.push(s.id)});const d=new Set(e);console.log(e),console.log(d),this.checked_keys=new Set(e)},getCheckedKeys(){console.log(this.$refs.tree.getCheckedKeys())},setCheckedNodes(){this.$refs.tree.setCheckedNodes([{id:5,label:"Level two 2-1"},{id:9,label:"Level three 1-1-1"}])},setCheckedKeys(){this.$refs.tree.setCheckedKeys([3])},resetChecked(){this.$refs.tree.setCheckedKeys([])}}},A={style:{margin:"30px"}},F={class:"grid-content bg-purple"},E={style:{margin:"10px"}},R={class:"grid-content bg-purple"},S={style:{margin:"10px"}},B={class:"buttons"};function P(e,d,s,_,l,i){const p=n("el-descriptions"),C=n("el-menu-item"),y=n("el-menu"),f=n("el-col"),c=n("el-button"),L=n("el-tree"),b=n("el-row");return k(),g("div",A,[t(b,{gutter:20},{default:o(()=>[t(f,{span:6},{default:o(()=>[a("div",F,[t(p,{title:"Role Info"}),a("p",E,"Role: "+u(l.role_name),1),t(y,null,{default:o(()=>[(k(!0),g(x,null,N(l.roleList,h=>(k(),v(C,{key:h.id,onClick:V=>{l.role_id=h.id,l.role_name=h.role_name}},{default:o(()=>[r(u(h.role_name),1)]),_:2},1032,["onClick"]))),128))]),_:1})])]),_:1}),t(f,{span:18},{default:o(()=>[a("div",R,[t(p,{title:"Folder Info"}),a("p",S,[r("Role: "+u(l.role_name)+" ",1),t(c,{type:"primary",onClick:e.assignment},{default:o(()=>[r("Forder Assignment")]),_:1},8,["onClick"])]),a("div",B,[t(c,{onClick:i.getCheckedNodes},{default:o(()=>[r("get by node")]),_:1},8,["onClick"]),t(c,{onClick:i.getCheckedKeys},{default:o(()=>[r("get by key")]),_:1},8,["onClick"]),t(c,{onClick:i.setCheckedNodes},{default:o(()=>[r("set by node")]),_:1},8,["onClick"]),t(c,{onClick:i.setCheckedKeys},{default:o(()=>[r("set by key")]),_:1},8,["onClick"]),t(c,{onClick:i.resetChecked},{default:o(()=>[r("reset")]),_:1},8,["onClick"])]),t(L,{data:l.forderList,"show-checkbox":"","node-key":"id","default-expand-all":"",ref:"tree","default-checked-keys":l.checked_keys,props:l.defaultProps},null,8,["data","default-checked-keys","props"])])]),_:1})]),_:1})])}const I=w(K,[["render",P]]);export{I as default};
